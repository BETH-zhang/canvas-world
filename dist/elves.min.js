!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Elves=e():t.Elves=e()}(window,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:r})},n.r=function(t){Object.defineProperty(t,"__esModule",{value:!0})},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=8)}([function(t,e){t.exports=function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}},function(t,e){t.exports=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,n){var r=n(12),i=n(11),o=n(10);t.exports=function(t){return r(t)||i(t)||o()}},function(t,e){t.exports=function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}},function(t,e){var n=Array.isArray;t.exports=n},function(t,e,n){var r=n(13);t.exports=function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&r(t,e)}},function(t,e){function n(e){return t.exports=n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},n(e)}t.exports=n},function(t,e,n){var r=n(14),i=n(3);t.exports=function(t,e){return!e||"object"!==r(e)&&"function"!=typeof e?i(t):e}},function(t,e,n){"use strict";n.r(e);var r=n(1),i=n.n(r),o=n(7),a=n.n(o),c=n(6),s=n.n(c),h=n(3),u=n.n(h),l=n(5),f=n.n(l),v=n(2),d=n.n(v),x=n(0),y=n.n(x),p=function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"0",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";i()(this,t),this.x=parseFloat(e),this.y=parseFloat(n),this.z=parseFloat(r)},w=function t(e,n,r,o){var a=this;i()(this,t),y()(this,"render",function(t,e,n){t.clearRect(0,0,2*e,2*n);var r=a.faces,i=a.faces.length;r.sort(function(t,e){return t[0].y+t[1].y+t[2].y+t[3].y-(e[0].y+e[1].y+e[2].y+e[3].y)});for(var o=0;o<i;++o){var c=r[o];t.beginPath(),t.fillStyle=a.facecolor[o];for(var s=0,h=c.length;s<h;++s){var u=a.project(c[s]);0==s?t.moveTo(u.x+e,u.y+n):t.lineTo(u.x+e,u.y+n)}t.closePath(),t.stroke(),t.fill()}}),y()(this,"project",function(t){return new p(t.x,t.z)}),y()(this,"rotate",function(t,e){for(var n=a.center,r=0;r<8;r++){var i=a.vertices[r],o=Math.cos(t),c=Math.sin(t),s=Math.cos(e),h=Math.sin(e),u=i.x-n.x,l=i.y-n.y,f=i.z-n.z;i.x=o*u-c*s*l+c*h*f+n.x,i.y=c*u+o*s*l-o*h*f+n.y,i.z=h*l+s*f+n.z}}),y()(this,"rotate1",function(t,e){for(var n=a.center,r=new p(0,1,0),i=0;i<8;i++){var o=a.vertices[i],c=Math.sqrt((Math.pow(r.x,2)+Math.pow(r.y,2))/(Math.pow(r.x,2)+Math.pow(r.y,2)+Math.pow(r.z,2))),s=Math.sqrt(Math.pow(r.z,2)/(Math.pow(r.x,2)+Math.pow(r.y,2)+Math.pow(r.z,2))),h=Math.sqrt(Math.pow(r.y,2)/(Math.pow(r.x,2)+Math.pow(r.y,2))),u=c*Math.sqrt(Math.pow(r.x,2)/(Math.pow(r.x,2)+Math.pow(r.y,2))),l=c*h,f=s,v=Math.pow(u,2),d=Math.pow(l,2),x=Math.pow(f,2),y=Math.cos(t),w=Math.sin(t),b=o.x-n.x,g=o.y-n.y,m=o.z-n.z;o.x=(u*l*(1-y)-f*w)*b+(y+d*(1-y))*g+(f*l*(1-y)+u*w)*m+n.x,o.y=(y+v*(1-y))*b+(l*u*(1-y)+f*w)*g+(f*u*(1-y)-l*w)*m+n.y,o.z=(u*f*(1-y)+l*w)*b+(l*f*(1-y)-u*w)*g+(y+x*(1-y))*m+n.z}}),y()(this,"rotate2",function(t,e){for(var n=a.center,r=new p(0,0,10),i=0;i<8;i++){var o=a.vertices[i],c=-r.x,s=-r.y,h=r.z,u=Math.pow(c,2),l=Math.pow(s,2),f=Math.pow(h,2),v=u+l+f,d=Math.sqrt(u+l+f),x=Math.cos(t),y=Math.sin(t),w=o.x-n.x,b=o.y-n.y,g=o.z-n.z;o.x=(u+(l+f)*x)/v*w+(c*s*(1-x)-h*d*y)/v*b+(c*h*(1-x)+s*d*y)/v*g+n.x,o.y=(c*s*(1-x)+h*d*y)/v*w+(l+(u+f)*x)/v*b+(s*h*(1-x)-c*d*y)/v*g+n.y,o.z=(c*h*(1-x)-s*d*y)/v*w+(s*h*(1-x)+c*d*y)/v*b+(f+(u+l)*x)/v*g+n.z}}),this.center=new p(e,n,r),this.side=o;var c=o/2;this.vertices=[new p(this.center.x-c,this.center.y-c,this.center.z+c),new p(this.center.x-c,this.center.y-c,this.center.z-c),new p(this.center.x+c,this.center.y-c,this.center.z-c),new p(this.center.x+c,this.center.y-c,this.center.z+c),new p(this.center.x+c,this.center.y+c,this.center.z+c),new p(this.center.x+c,this.center.y+c,this.center.z-c),new p(this.center.x-c,this.center.y+c,this.center.z-c),new p(this.center.x-c,this.center.y+c,this.center.z+c)],this.facecolor=["rgba(227, 236, 236, 1)","rgba(0, 150, 255, 1)","rgba(158, 63, 34, 1)","rgba(41, 222, 80, 1)","rgba(231, 234, 32, 1)","rgba(226, 131, 14, 1)"],this.faces=[[this.vertices[0],this.vertices[1],this.vertices[2],this.vertices[3]],[this.vertices[3],this.vertices[2],this.vertices[5],this.vertices[4]],[this.vertices[4],this.vertices[5],this.vertices[6],this.vertices[7]],[this.vertices[7],this.vertices[6],this.vertices[1],this.vertices[0]],[this.vertices[7],this.vertices[0],this.vertices[3],this.vertices[4]],[this.vertices[1],this.vertices[6],this.vertices[5],this.vertices[2]]],console.log(this.faces)},b=function t(e,n){var r=this;i()(this,t),y()(this,"anchor",function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{stroke:"#ee6621"},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{scale:1,borderRadius:3},o=r;return{x:t,y:e,scale:i.scale||1,borderRadius:i.borderRadius||3,draw:function(){var r=[t,e],i=[t-10*this.scale,e+10*this.scale],a=[t+10*this.scale,e+10*this.scale],c=[[r[0]-this.borderRadius,r[1]],[r[0],r[1]-this.borderRadius],[r[0]+this.borderRadius,r[1]],[a[0]-this.borderRadius,a[1]-this.borderRadius],[a[0]-this.borderRadius,a[1]-this.borderRadius],[a[0],a[1]+this.borderRadius],[a[0]-2*this.borderRadius,a[1]+this.borderRadius],[i[0]+2*this.borderRadius,i[1]+this.borderRadius],[i[0]+2*this.borderRadius,i[1]+this.borderRadius],[i[0],i[1]+this.borderRadius],[i[0]+this.borderRadius,i[1]-this.borderRadius],[r[0]-this.borderRadius,r[1]]];o.draw.setStyle(n),o.ctx.beginPath(),o.ctx.moveTo(c[0][0],c[0][1]);for(var s=0;s<c.length-1;s+=4)o.ctx.quadraticCurveTo(c[s+1][0],c[s+1][1],c[s+2][0],c[s+2][1]),o.ctx.lineTo(c[s+3][0],c[s+3][1]);o.ctx.closePath(),o.draw.endToDraw(),o.ctx.restore()}}}),y()(this,"ball",function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},a=r;return{x:t,y:e,vx:o.vx||0,vy:o.vy||0,radius:n/2,update:function(t){var e=this;Object.keys(t).forEach(function(n){e[n]=t[n]})},draw:function(){a.draw.circle(this.x,this.y,n,i)}}}),y()(this,"smile",function(t,e,n,i){arguments.length>4&&void 0!==arguments[4]&&arguments[4];var o=r,a=t-n/4*2*.4,c=e-n/5,s=t+n/4*2*.4,h=e-n/5,u=t-n/4/2,l=e+n/5,f=t+n/4/2,v=e+n/5;return{x:t,y:e,draw:function(){o.draw.circle(this.x,this.y,n,i);var t=i.fill?Object.assign({},i,{fill:"",stroke:"#fff"}):i;o.draw.circle(a,c,n/7.5,t),o.draw.circle(s,h,n/7.5,t),o.draw.line(u,l,f,v,t)}}}),y()(this,"cube",function(t,e){var n=r;return{x:t||r.canvas.width,y:e||r.canvas.height,instance:null,mousedown:!1,draw:function(){var t=new w(0,100,0,50);this.instance=t,t.render(n.ctx,this.x,this.y)}}}),y()(this,"customShape",function(t,e,n){var i=r;return{onClick:n,draw:function(){var n;(n=i.draw)[t].apply(n,d()(e))}}}),this.canvas=e,this.ctx=e.getContext("2d"),this.draw=n},g=function t(e){var n=this;i()(this,t),y()(this,"grayscale",function(){for(var t=n.ctx.getImageData(0,0,n.canvas.width,n.canvas.height),e=t.data,r=0;r<e.length;r+=4){var i=(e[r]+e[r+1]+e[r+2])/3;e[r]=i,e[r+1]=i,e[r+2]=i}n.ctx.putImageData(t,0,0)}),y()(this,"invert",function(){for(var t=n.ctx.getImageData(0,0,n.canvas.width,n.canvas.height),e=t.data,r=0;r<e.length;r+=4)e[r]=255-e[r],e[r+1]=255-e[r+1],e[r+2]=255-e[r+2];n.ctx.putImageData(t,0,0)}),this.canvas=e,this.ctx=e.getContext("2d")},m=function t(e){var n=this;i()(this,t),y()(this,"draw",function(t){n.clear(),t.draw(),t.x+=t.vx,t.y+=t.vy,(t.y+t.vy>n.canvas.height||t.y+t.vy<0)&&(t.vy=-t.vy),(t.x+t.vx>n.canvas.width||t.x+t.vx<0)&&(t.vx=-t.vx),n.raf=window.requestAnimationFrame(function(){return n.draw(t)})}),y()(this,"clear",function(){n.ctx.fillStyle="rgba(255,255,255,0.3)",n.ctx.fillRect(0,0,n.canvas.width,n.canvas.height)}),y()(this,"longTailEffect",function(t){var e=!1;n.canvas.addEventListener("mousemove",function(n){e||(this.clear(),t.x=n.clientX,t.y=n.clientY,t.draw())}),n.canvas.addEventListener("click",function(n){var r=this;e||(this.raf=window.requestAnimationFrame(function(){return r.draw(t)}),e=!0)}),n.canvas.addEventListener("mouseout",function(t){window.cancelAnimationFrame(this.raf),e=!1})}),y()(this,"readsColor",function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=n.ctx.getImageData(0,0,n.canvas.width,n.canvas.height);return i.data[4*((t-1)*i.width+(e-1))-1+r]}),y()(this,"drawPixelColor",function(t){if(!t)return null;var e=t.layerX,r=t.layerY,i=n.ctx.getImageData(e,r,1,1).data,o="rgba("+i[0]+","+i[1]+","+i[2]+","+i[3]/255+")";return console.log("%c".concat(o),"color: ".concat(o)),o}),y()(this,"offcreenRender",function(t){var e={};e.offscreenCanvas=t,e.offscreenCanvas.width=e.width,e.offscreenCanvas.height=e.height,e.offscreenContext=e.offscreenCanvas.getContext("2d")}),y()(this,"addMouseEvent",function(t,e,r){var i=!1;n.canvas.addEventListener("mousedown",function(e){i=!0,t(e)}),document.addEventListener("mousemove",function(t){i&&e(t)}),document.addEventListener("mouseup",function(){i=!1,r()})}),y()(this,"addClickEvent",function(){n.canvas.addEventListener("click",function(t){t.clientX,t.clientY})}),this.canvas=e,this.ctx=e.getContext("2d")},M=(n(9),n(4)),T=n.n(M),P=["","#FB1808","#FEEF0B","#30FF07","#1DE5FE","#0031FF","#FB00E3","#FB001F","#FB1808","#FEEF0B","#30FF07","#1DE5FE","#0031FF","#FB00E3"],S=function(t){function e(t,n){var r;return i()(this,e),(r=a()(this,s()(e).call(this))).canvas=t,r.ctx=t.getContext("2d"),r.raf=null,r.initStyle(n||{}),r.atomic=new b(t,u()(r)),r.filter=new g(t,u()(r)),r.tools=new m(t,u()(r)),r}return f()(e,t),e}(function t(e,n){var r=this;i()(this,t),y()(this,"initStyle",function(t){if(!t||!r.ctx)return null;r.rainbow=t.rainbow,r.screenWidth=t.screenWidth||800,r.screenHeight=t.screenHeight||800,r.ctx.lineCap="round",r.ctx.lineJoin="round",r.setStyle(t)}),y()(this,"setStyle",function(t){if(!t||!r.ctx)return null;r.styleType=[],t.fill&&r.styleType.push("fill"),t.stroke&&r.styleType.push("stroke"),r.ctx.strokeStyle=t.stroke||"#000000",r.ctx.fillStyle=t.fill||"#cc0000",r.ctx.lineWidth=t.strokeWidth||3}),y()(this,"endToDraw",function(){r.styleType.length?r.styleType.forEach(function(t){r.ctx[t]()}):r.ctx.stroke()}),y()(this,"rectangle",function(t,e,n,i,o){r.setStyle(o),r.ctx.beginPath(),r.ctx.rect(t,e,n,i),r.endToDraw()}),y()(this,"line",function(t,e,n,i,o){r.setStyle(o),r.ctx.beginPath(),r.ctx.moveTo(t,e),r.ctx.lineTo(n,i),r.endToDraw()}),y()(this,"circle",function(t,e,n,i){r.setStyle(i),r.ctx.beginPath(),r.ctx.arc(t,e,n/2,0,360*Math.PI/180),r.endToDraw()}),y()(this,"arc",function(t,e,n,i,o){r.setStyle(o),r.ctx.beginPath(),r.ctx.translate(t,e);var a=Math.sqrt(Math.pow(t-n,2)+Math.pow(e-i,2));r.ctx.arc(t+(n-t)/2,e+(i-e)/2,a,0,2*Math.PI),r.endToDraw()}),y()(this,"ellipse",function(t,e,n,i){var o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};r.setStyle(o);var a=.5*n,c=.6*i;r.ctx.save(),r.ctx.translate(t,e),o.rotate&&r.ctx.rotate(o.rotate*Math.PI/180),r.ctx.beginPath(),r.ctx.moveTo(0,c),r.ctx.bezierCurveTo(a/3,c,a,c/3*2,a,0),r.ctx.bezierCurveTo(a,-c/3*2,a/3,-c,0,-c),r.ctx.bezierCurveTo(-a/3,-c,-a,-c/3*2,-a,0),r.ctx.bezierCurveTo(-a,c/3,-a/3*2,c,0,c),r.ctx.closePath(),r.endToDraw(),r.ctx.restore()}),y()(this,"polygon",function(t,e){if(r.setStyle(e),T()(t[0])){var n;r.ctx.beginPath(),(n=r.ctx).moveTo.apply(n,d()(t[0]));for(var i=1;i<t.length;i++){var o;(o=r.ctx).lineTo.apply(o,d()(t[i]))}}else{var a=t[0],c=t[1],s=t[2],h=t[3],u=t[4],l=Math.sqrt(Math.pow(a-s,2)+Math.pow(c-h,2));r.ctx.save(),r.ctx.translate(a,c),r.ctx.rotate(Math.PI/2);var f=l*Math.cos(Math.PI/u),v=l*Math.sin(Math.PI/u);r.ctx.beginPath(),r.ctx.lineCap="round",r.ctx.moveTo(f,v);for(var x=0;x<=u;x++)r.ctx.rotate(2*Math.PI/u),r.ctx.lineTo(f,-v)}r.ctx.closePath(),r.endToDraw(),r.ctx.restore()}),y()(this,"curveTag",function(t,e,n,i,o){for(var a=[],c=0;c<(n-t)/7;c++){var s=t+n/100*c+10,h=30*Math.PI/180*c*20,u=e+Math.round(5*Math.sin(h));a.push([s,u])}r.curve(a,o)}),y()(this,"linearGradient",function(){r.canvasGradient=r.ctx.createLinearGradient(0,0,r.screenWidth,r.screenHeight),P.forEach(function(t,e){t&&r.canvasGradient.addColorStop(e/P.length,t)}),r.ctx.strokeStyle=r.canvasGradient}),y()(this,"linearPath",function(t,e){var n;r.setStyle(e),r.ctx.beginPath(),(n=r.ctx).moveTo.apply(n,d()(t[0]));for(var i=1;i<t.length;i++){var o;(o=r.ctx).lineTo.apply(o,d()(t[i]))}r.endToDraw(),r.ctx.restore()}),y()(this,"curve",function(t,e){r.setStyle(e);for(var n=0;n<t.length-1;n+=3)r.ctx.beginPath(),r.ctx.moveTo(t[n][0],t[n][1]),r.pen(t[n+1][0],t[n+1][1],t[n+2][0],t[n+2][1],e);r.endToDraw(),r.ctx.restore()}),y()(this,"pen",function(t,e,n,i,o){r.setStyle(o),r.rainbow&&r.linearGradient(),r.ctx.save(),r.ctx.quadraticCurveTo(t,e,n,i),r.endToDraw(),r.ctx.restore()}),y()(this,"image",function(t,e,n,i,o){return new Promise(function(a){var c=new Image;c.src=o,c.crossOrigin="Anonymous",c.onload=function(){r.ctx.drawImage(c,t,e,n,i),a()}})}),y()(this,"clear",function(){r.ctx.clearRect(0,0,r.screenWidth,r.screenHeight)}),y()(this,"eraser",function(t,e,n,i){r.ctx.clearRect(n-5,i-5,10,10)}),y()(this,"cut",function(t,e,n,i){r.ctx.save(),r.ctx.setLineDash([4,2]),r.ctx.beginPath(),r.ctx.lineWidth=1,r.ctx.rect(t,e,n-t,i-e),r.ctx.stroke(),r.ctx.restore()}),this.ctx=e,this.initStyle(n||{})});n.d(e,"physical",function(){return z});var z=void 0;e.default=S},function(t,e){t.exports=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},function(t,e){t.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}},function(t,e){t.exports=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}},function(t,e){t.exports=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}},function(t,e){function n(e,r){return t.exports=n=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},n(e,r)}t.exports=n},function(t,e){function n(t){return(n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(e){return"function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?t.exports=r=function(t){return n(t)}:t.exports=r=function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":n(t)},r(e)}t.exports=r}])});